        -:    0:Source:cardtest4.c
        -:    0:Graph:./cardtest4.gcno
        -:    0:Data:./cardtest4.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:/*
        -:    2: * Assignment 3 CS362 Unit Test 1
        -:    3: * 
        -:    4: */
        -:    5:
        -:    6:/* 
        -:    7: * File: cardtest4.c
        -:    8: * Author: Dustin LaGrone
        -:    9: * Created on October 18, 2018
        -:   10: */
        -:   11:
        -:   12:#define ASSERTTRUE(BoolCondition,__LINE__) do { if (!(BoolCondition)) { aFailed(__LINE__); } \
        -:   13:else{printf("ASSERTION TRUE! line:%d\n",__LINE__);}} while (0)
        -:   14:#include <time.h>
        -:   15:#include <time.h>
        -:   16:#include <assert.h>
        -:   17:#include <stdio.h>
        -:   18:#include <stdlib.h>
        -:   19:#include "dominion.h"
        -:   20:#include "dominion_helpers.h"
        -:   21:#include "rngs.h"
        -:   22:#include "interface.h"
        -:   23:/*
        -:   24: * Simple C Test Suite
        -:   25: */
        -:   26:/*Part of the ASSERTTRUE test*/
function aFailed called 0 returned 0% blocks executed 0%
    #####:   27:void aFailed(int line){
        -:   28:    
    #####:   29:    printf("ASSERTION FALSE! line: %d\n",line);
call    0 never executed
    #####:   30:}
        -:   31:/*First test of the Great Hall card functionality*/
function test1 called 1 returned 100% blocks executed 78%
        1:   32:void test1() {
        -:   33:    
        -:   34:    int r, numberActionsP1;
        -:   35:    struct gameState state;
        -:   36:    
        1:   37:    int k[10] = {adventurer, council_room, feast, gardens, mine,
        -:   38:                    remodel, smithy, village, baron, great_hall};
        -:   39:    
        -:   40:    /*Random Game Initialization Borrowed from betterTestDrawCard.c*/
        1:   41:    memset(&state, 23, sizeof(struct gameState)); 
        -:   42:    
        -:   43:    /*Discard Hand Position*/
        1:   44:    int handPosPlayer = 1;
        -:   45:    
        -:   46:    /*Test that game was initialized*/
        1:   47:    r = initializeGame(2, k, 1, &state);
call    0 returned 100%
       1*:   48:    ASSERTTRUE(r != -1,__LINE__);
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
call    3 returned 100%
        -:   49:    
        -:   50:    /*Stored discard Postion*/
        1:   51:    int cardtoDiscard = state.hand[0][handPosPlayer];
        -:   52:    
        -:   53:    /*Stored Number of Actions*/
        1:   54:    int numberOfAction = state.numActions;
        -:   55:    
        -:   56:    /*Test Great Hall function Discard for selected card */
        1:   57:    int cardsInHand = state.handCount[0];
        -:   58:    
        -:   59:    /*Selection for hand position to be discarded used to compare discard piles in Adventurer*/
        1:   60:    cardEffect(great_hall,0,0,0,&state,handPosPlayer, 0);
call    0 returned 100%
        1:   61:    numberActionsP1 = state.numActions;
        -:   62:    /*Test Players Hand Before Against After to make sure they're equal*/
       1*:   63:    ASSERTTRUE(state.handCount[0] == cardsInHand,__LINE__);   
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
call    3 returned 100%
        -:   64:    
        -:   65:    /*Test the discard for the players hand and the played cards*/
        1:   66:    int sizeofPlayed = state.playedCardCount;
        2:   67:    for(int i = 0; i < sizeofPlayed; i++){
branch  0 taken 50%
branch  1 taken 50% (fallthrough)
       1*:   68:         ASSERTTRUE(state.playedCards[i] == cardtoDiscard,__LINE__);
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
call    3 returned 100%
        -:   69:    }
        -:   70:    /*Test Number of Actions increases by one*/
        1:   71:    numberOfAction++;
        -:   72:    
       1*:   73:    ASSERTTRUE(numberOfAction == numberActionsP1,__LINE__);
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 never executed
call    3 returned 100%
        -:   74:    
        1:   75:}
function main called 1 returned 100% blocks executed 100%
        1:   76:int main(int argc, char** argv) {
        1:   77:    printf("%%SUITE_STARTING%% cardtest4\n");
call    0 returned 100%
        1:   78:    printf("%%SUITE_STARTED%%\n");
call    0 returned 100%
        -:   79:
        1:   80:    printf("%%TEST_STARTED%% test1 (cardtest4)\n");
call    0 returned 100%
        1:   81:    test1();
call    0 returned 100%
        1:   82:    printf("%%TEST_FINISHED%% test1 (cardtest4) \n");
call    0 returned 100%
        1:   83:    printf("%%SUITE_FINISHED%%\n");
call    0 returned 100%
        -:   84:
        1:   85:    return (EXIT_SUCCESS);
        -:   86:}
